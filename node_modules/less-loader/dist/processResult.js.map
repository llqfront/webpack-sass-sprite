{"version":3,"sources":["../src/processResult.js"],"names":["removeSourceMappingUrl","require","formatLessError","processResult","loaderContext","resultPromise","callback","then","css","map","imports","forEach","addDependency","JSON","parse","lessError","module","exports"],"mappings":"AAAA,IAAMA,yBAAyBC,QAAQ,0BAAR,CAA/B;AACA,IAAMC,kBAAkBD,QAAQ,mBAAR,CAAxB;;AAEA;;;;;;AAMA,SAASE,aAAT,CAAuBC,aAAvB,EAAsCC,aAAtC,EAAqD;AAAA,MAC3CC,QAD2C,GAC9BF,aAD8B,CAC3CE,QAD2C;;;AAGnDD,gBACGE,IADH,CACQ,gBAA2B;AAAA,QAAxBC,GAAwB,QAAxBA,GAAwB;AAAA,QAAnBC,GAAmB,QAAnBA,GAAmB;AAAA,QAAdC,OAAc,QAAdA,OAAc;;AAC/BA,YAAQC,OAAR,CAAgBP,cAAcQ,aAA9B,EAA6CR,aAA7C;AACA,WAAO;AACL;AACA;AACAI,WAAKR,uBAAuBQ,GAAvB,CAHA;AAILC,WAAK,OAAOA,GAAP,KAAe,QAAf,GAA0BI,KAAKC,KAAL,CAAWL,GAAX,CAA1B,GAA4CA;AAJ5C,KAAP;AAMD,GATH,EASK,UAACM,SAAD,EAAe;AAChB,UAAMb,gBAAgBa,SAAhB,CAAN;AACD,GAXH,EAYGR,IAZH,CAYQ,iBAAkB;AAAA,QAAfC,GAAe,SAAfA,GAAe;AAAA,QAAVC,GAAU,SAAVA,GAAU;;AACtBH,aAAS,IAAT,EAAeE,GAAf,EAAoBC,GAApB;AACD,GAdH,EAcKH,QAdL;AAeD;;AAEDU,OAAOC,OAAP,GAAiBd,aAAjB","file":"processResult.js","sourcesContent":["const removeSourceMappingUrl = require('./removeSourceMappingUrl');\nconst formatLessError = require('./formatLessError');\n\n/**\n * Removes the sourceMappingURL from the generated CSS, parses the source map and calls the next loader.\n *\n * @param {loaderContext} loaderContext\n * @param {Promise<LessResult>} resultPromise\n */\nfunction processResult(loaderContext, resultPromise) {\n  const { callback } = loaderContext;\n\n  resultPromise\n    .then(({ css, map, imports }) => {\n      imports.forEach(loaderContext.addDependency, loaderContext);\n      return {\n        // Removing the sourceMappingURL comment.\n        // See removeSourceMappingUrl.js for the reasoning behind this.\n        css: removeSourceMappingUrl(css),\n        map: typeof map === 'string' ? JSON.parse(map) : map,\n      };\n    }, (lessError) => {\n      throw formatLessError(lessError);\n    })\n    .then(({ css, map }) => {\n      callback(null, css, map);\n    }, callback);\n}\n\nmodule.exports = processResult;\n"]}