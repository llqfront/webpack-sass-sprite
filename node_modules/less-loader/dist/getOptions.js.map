{"version":3,"sources":["../src/getOptions.js"],"names":["loaderUtils","require","clone","createWebpackLessPlugin","getOptions","loaderContext","options","plugins","relativeUrls","compress","Boolean","minimize","filename","resource","push","sourceMap","outputSourceFiles","module","exports"],"mappings":"AAAA,IAAMA,cAAcC,QAAQ,cAAR,CAApB;AACA,IAAMC,QAAQD,QAAQ,OAAR,CAAd;AACA,IAAME,0BAA0BF,QAAQ,2BAAR,CAAhC;;AAEA;;;;;AAKA,SAASG,UAAT,CAAoBC,aAApB,EAAmC;AACjC,MAAMC;AACJC,aAAS,EADL;AAEJC,kBAAc,IAFV;AAGJC,cAAUC,QAAQL,cAAcM,QAAtB;AAHN,KAIDT,MAAMF,YAAYI,UAAZ,CAAuBC,aAAvB,CAAN,CAJC,CAAN;;AAOA;AACAC,UAAQM,QAAR,GAAmBP,cAAcQ,QAAjC;;AAEA;AACA,MAAI,WAAWP,OAAX,KAAuB,KAA3B,EAAkC;AAChC;AACAA,YAAQC,OAAR,CAAgBO,IAAhB,CAAqBX,wBAAwBE,aAAxB,CAArB;AACD;;AAED,MAAIC,QAAQS,SAAZ,EAAuB;AACrB,QAAI,OAAOT,QAAQS,SAAf,KAA6B,SAAjC,EAA4C;AAC1CT,cAAQS,SAAR,GAAoB,EAApB;AACD;AACD,QAAI,uBAAuBT,QAAQS,SAA/B,KAA6C,KAAjD,EAAwD;AACtD;AACAT,cAAQS,SAAR,CAAkBC,iBAAlB,GAAsC,IAAtC;AACD;AACF;;AAED,SAAOV,OAAP;AACD;;AAEDW,OAAOC,OAAP,GAAiBd,UAAjB","file":"getOptions.js","sourcesContent":["const loaderUtils = require('loader-utils');\nconst clone = require('clone');\nconst createWebpackLessPlugin = require('./createWebpackLessPlugin');\n\n/**\n * Retrieves the options from the loaderContext, makes a deep copy of it and normalizes it for further consumption.\n *\n * @param {LoaderContext} loaderContext\n */\nfunction getOptions(loaderContext) {\n  const options = {\n    plugins: [],\n    relativeUrls: true,\n    compress: Boolean(loaderContext.minimize),\n    ...clone(loaderUtils.getOptions(loaderContext)),\n  };\n\n  // We need to set the filename because otherwise our WebpackFileManager will receive an undefined path for the entry\n  options.filename = loaderContext.resource;\n\n  // When no paths are given, we use the webpack resolver\n  if ('paths' in options === false) {\n    // It's safe to mutate the array now because it has already been cloned\n    options.plugins.push(createWebpackLessPlugin(loaderContext));\n  }\n\n  if (options.sourceMap) {\n    if (typeof options.sourceMap === 'boolean') {\n      options.sourceMap = {};\n    }\n    if ('outputSourceFiles' in options.sourceMap === false) {\n      // Include source files as `sourceContents` as sane default since this makes source maps \"just work\" in most cases\n      options.sourceMap.outputSourceFiles = true;\n    }\n  }\n\n  return options;\n}\n\nmodule.exports = getOptions;\n"]}